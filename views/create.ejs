<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>个人博客</title>
		<link rel="stylesheet" href="../public/css/bootstrap.css">
		<link rel="stylesheet" href="../public/css/style.css">

	</head>
	<body>
		<h1>恭喜<span><%= username %></span>登录成功</h1>
		<div class="menu">
			<img src="../public/images/menu.png" alt="" width="18px">
			<ul class="list-unstyled">
				<li><a href="http://localhost:8989/">首页</a></li>
				<li><a href="http://localhost:8989/quit">退出</a></li>
			</ul>
		</div>
		<h2 class="text-center title">我的博客</h2>
		<p class="text-center">请注册</p>
		<form class="myinfo"  onsubmit=" return  add1()" >
		  <div class="form-group">
		    <label for="exampleInputEmail1">标题<sup>*</sup></label>
		    <input type="text" class="form-control" id="exampleInputEmail1" placeholder="请输入标题">
		    <span class="titletip"></span>
		  </div>
		  <div class="form-group">
		    <label for="personal">内容<sup>*</sup></label>
		    <textarea name=""  cols="30" rows="10" class="form-control" id="personal"></textarea>
		      <span class=".contip"></span>
		  </div>
		  <button type="submit" class="btn btn-primary">发布</button>
		</form>



		<script src='../public/js/jquery.min.js'></script>
		<script src="../public/js/bootstrap.min.js"></script>
		<script src="../public/js/my.js"></script>
		

		<script>
		
			function add1(){

				var title=$('#exampleInputEmail1').val();
				var content=$('#personal').val();
				var username=$('h1').children('span').html();
				console.log('title='+title);
				console.log('content='+content);
				console.log('username='+username)

				var flag=true;
				if(title==''){
                  $('.titletip').html('标题不能为空');
                  flag=false;
				}
				if(content==''){
                  $('.contip').html('内容不能为空');
                  flag=false;
				}
				
			
				if(flag){

					$.ajax({
		         		url: 'http://localhost:8989/insert',
		         		type: 'get',
		         		dataType: 'json',

		         		data: {title1:title,content1:content,username:username},


		         		success:function(res,status,xhr){

		         			console.log(res.status);
		         			if(res.status=='数据插入成功'){
								
								location.href="https://www.baidu.com/"
							}else{
								  $('.titletip').html('发布不成功，请重新发布');
							}
									
						}

					})
				}

           return flag;

			}
		</script>
	</body>
</html>